<!-- @format -->

<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <title>図書館管理システム</title>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='base-style.css') }}"
        />
    </head>
    <body>
        <h1>図書館管理システム</h1>

        <h2>管理メニュー</h2>
        <ul>
            <li><a href="{{ url_for('user.list') }}">メンバー</a></li>
            <li><a href="{{ url_for('book.list') }}">本</a></li>
            <li><a href="{{ url_for('borrow.list') }}">貸出</a></li>
        </ul>

        <h3>最近登録された会員数</h3>
        <table>
            <thead>
                <tr>
                    <th>期間</th>
                    <th>新規会員数</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>過去7日間</td>
                    <td>{{ new_members_week }}人</td>
                </tr>
                <tr>
                    <td>過去30日間</td>
                    <td>{{ new_members_month }}人</td>
                </tr>
                <tr>
                    <td>過去90日間</td>
                    <td>{{ new_members_three_months }}人</td>
                </tr>
            </tbody>
        </table>

        <hr />
        <h3>貸出状況</h3>
        <p>現在貸出中の冊数: <strong>{{ current_borrowed }}</strong> 冊</p>

        <h4>月別貸出件数</h4>
        <table>
            <thead>
                <tr>
                    <th>月</th>
                    <th>貸出件数</th>
                </tr>
            </thead>
            <tbody>
                {% for month, count in monthly_borrows %}
                <tr>
                    <td>{{ month }}</td>
                    <td>{{ count }} 件</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h4>よく借りられている本（上位5）</h4>
        <ol>
            {% for b in top_books %}
            <li>{{ b.title }} — {{ b.count }} 回</li>
            {% endfor %}
        </ol>
    </body>
</html>
